---
- name: configure ldap.properties
  ansible.builtin.template:
    src: templates/opt/shibboleth-idp/conf/ldap.properties.j2
    dest: /opt/shibboleth-idp/conf/ldap.properties
    owner: root
    group: tomcat
    mode: 0755

- name: configure LDAP password
  ansible.builtin.lineinfile:
    path: /opt/shibboleth-idp/credentials/secrets.properties
    regexp: "^idp.authn.LDAP.bindDNCredential"
    line: "idp.authn.LDAP.bindDNCredential = {{ ldap_bindpw }}"
